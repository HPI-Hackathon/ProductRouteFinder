<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Starter Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <style type="text/css">
    html, body, #map-canvas {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      padding-top: 50px;
    }

    .container-fluid, .row, .col-md-8 {
      height: 100%;
    }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBlM4TmmBINwcow1cQtcO359u8jX3qTFSo"></script>
    <script type="text/javascript">
    var directionsDisplay;
	var directionsService = new google.maps.DirectionsService();
	var map;

	function initialize() {
	  directionsDisplay = new google.maps.DirectionsRenderer();
	  var chicago = new google.maps.LatLng(41.850033, -87.6500523);
	  var mapOptions = {
	    zoom:7,
	    center: chicago
	  };
	  map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
	  directionsDisplay.setMap(map);
	}

    function getSearchPoints(overview_path) {
    var i,
        array_length = overview_path.length,
        current_length = 0;

    for (i = 0; i < array_length - 1; i += 1) {
        current_length += google.maps.geometry.spherical.computeDistanceBetween(overview_path[i], overview_path[i + 1]);
        }
        console.log(current_length);
    }
        
	function calcRoute() {
	  var start = document.getElementById('start').value;
	  var end = document.getElementById('end').value;
	  var request = {
	      origin:start,
	      destination:end,
	      travelMode: google.maps.TravelMode.DRIVING
	  };
	  directionsService.route(request, function(response, status) {
	    if (status == google.maps.DirectionsStatus.OK) {
	      directionsDisplay.setDirections(response);
	   //    Construct the circle for each value in citymap.
		  // Note: We scale the area of the circle based on the population.
	  	   var points = response.routes[0].overview_path
		  for (var i in points) {
		  	var point = points[i];
		    var circleOptions = {
		      strokeColor: '#FF0000',
		      strokeOpacity: 0.8,
		      strokeWeight: 2,
		      fillColor: '#FF0000',
		      fillOpacity: 0.35,
		      map: map,
		      center: point,
		      radius: Math.sqrt(document.getElementById('radius').value) * 100
		    };
		    // Add the circle for every point on the map
		    pointCircle = new google.maps.Circle(circleOptions);
		  }

            // getSearchPoints(response.routes[0].overview_path);

	    }
	  });
	}
	google.maps.event.addDomListener(window, 'load', initialize);
    // function initialize() {
    //   var berlin = new google.maps.LatLng(52.5166667, 13.4);
    //   var mapOptions = {
    //     center: berlin,
    //     zoom: 10
    //   };
    //   map = new google.maps.Map(document.getElementById('map-canvas'),
    //       mapOptions);
    // }
    // google.maps.event.addDomListener(window, 'load', initialize);
    // //var that = this;

    // function dirSearch (src, dst, mode) {
    //   var directionsDisplay = new google.maps.DirectionsRenderer({
    //     map: map,
    //     panel: document.getElementById('directions'),
    //     draggable: true
    //   });

    //   var ds = new google.maps.DirectionsService();
    //   ds.route({
    //     origin : 'Potsdam',
    //     destination : 'Berlin',
    //     region : 'at',
    //     travelMode: google.maps.TravelMode.DRIVING
    //   }, function(result, status) {
    //     if(status == google.maps.DirectionsStatus.OK) {
    //       directionsDisplay.setDirections(result);
    //     }
    //   });
    // }

    // dirSearch('Berlin', 'Potsdam', 'bicycle');
    </script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
<div id="panel">
    <b>Start: </b>
    <input id="start" onchange="calcRoute();">
    <b>End: </b>
    <input id="end" onchange="calcRoute();"> 
    <b>Umkreis</b> 
    <input id="radius" onchange="calcRoute();">

    </div>
    <div id="map-canvas"></div>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Your moms map</a>
        </div>
        <!--
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div>--><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-md-4">
          <h2>Hello</h2>
        </div>
        <div class="col-md-8">
          <div id="map-canvas"></div>
          <div id="directions"></div>
        </div>
      </div>
    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
